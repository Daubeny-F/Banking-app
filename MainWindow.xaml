<Window x:Class="BankingSystem.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BankingSystem"
        Title="Banking System" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2D2D30" Padding="15">
            <StackPanel>
                <TextBlock Text="Banking System" FontSize="24" FontWeight="Bold" Foreground="White"/>
                <TextBlock x:Name="StatusText" Text="Ready" FontSize="12" Foreground="#CCCCCC" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <TabControl Grid.Row="1" Margin="10">
            <!-- Banks Tab -->
            <TabItem Header="Banks">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Bank List -->
                    <Border Grid.Column="0" BorderBrush="#CCCCCC" BorderThickness="1" Margin="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="Available Banks" FontWeight="Bold" FontSize="16" Margin="10"/>
                            
                            <ListBox x:Name="BanksList" Grid.Row="1" Margin="5"
                                    SelectionChanged="BanksList_SelectionChanged">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="5">
                                            <TextBlock Text="{Binding BankName}" FontWeight="Bold" FontSize="14"/>
                                            <TextBlock>
                                                <Run Text="SWIFT: "/><Run Text="{Binding SwiftAccount}"/>
                                            </TextBlock>
                                            <TextBlock>
                                                <Run Text="{Binding BankLocation}"/><Run Text=", "/><Run Text="{Binding BankCountry}"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <Button Grid.Row="2" Content="Create New Bank" Click="CreateBank_Click"/>
                        </Grid>
                    </Border>

                    <!-- Bank Details -->
                    <Border Grid.Column="1" BorderBrush="#CCCCCC" BorderThickness="1" Margin="5">
                        <ScrollViewer>
                            <StackPanel x:Name="BankDetailsPanel" Margin="10">
                                <TextBlock Text="Select a bank to view details" FontStyle="Italic" 
                                          x:Name="NoBankSelectedText"/>
                                
                                <StackPanel x:Name="BankInfoPanel" Visibility="Collapsed">
                                    <TextBlock Text="Bank Information" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock Text="Bank Name:" FontWeight="Bold" Grid.Row="0"/>
                                        <TextBlock x:Name="BankNameText" Grid.Row="0" Grid.Column="1"/>

                                        <TextBlock Text="SWIFT:" FontWeight="Bold" Grid.Row="1"/>
                                        <TextBlock x:Name="BankSwiftText" Grid.Row="1" Grid.Column="1"/>

                                        <TextBlock Text="Location:" FontWeight="Bold" Grid.Row="2"/>
                                        <TextBlock x:Name="BankLocationText" Grid.Row="2" Grid.Column="1"/>

                                        <TextBlock Text="Country:" FontWeight="Bold" Grid.Row="3"/>
                                        <TextBlock x:Name="BankCountryText" Grid.Row="3" Grid.Column="1"/>

                                        <TextBlock Text="Balance:" FontWeight="Bold" Grid.Row="4"/>
                                        <TextBlock x:Name="BankBalanceText" Grid.Row="4" Grid.Column="1" Foreground="Green" FontWeight="Bold"/>
                                    </Grid>

                                    <Separator Margin="0,20"/>
                                    
                                    <TextBlock Text="Accounts" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                                    <DataGrid x:Name="AccountsGrid" AutoGenerateColumns="False" Height="300" 
                                             IsReadOnly="True" SelectionChanged="AccountsGrid_SelectionChanged">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="IBAN" Binding="{Binding Iban}" Width="150"/>
                                            <DataGridTextColumn Header="Holder" Binding="{Binding AccountHolder}" Width="*"/>
                                            <DataGridTextColumn Header="Type" Binding="{Binding AccountType}" Width="80"/>
                                            <DataGridTextColumn Header="Balance" Binding="{Binding Amount, StringFormat='{}{0:F2}'}" Width="100"/>
                                            <DataGridTextColumn Header="Currency" Binding="{Binding AccountCurrency}" Width="80"/>
                                            <DataGridTextColumn Header="Status" Width="80">
                                                <DataGridTextColumn.Binding>
                                                    <Binding Path="AccountCloseDate">
                                                        <Binding.Converter>
                                                            <local:DateToStatusConverter/>
                                                        </Binding.Converter>
                                                    </Binding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Accounts Tab -->
            <TabItem Header="Account Operations">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="Account Operations" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>
                        
                        <Expander Header="Open New Account" IsExpanded="True" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="Select Bank:"/>
                                    <ComboBox x:Name="BankComboBox" DisplayMemberPath="BankName"/>
                                    
                                    <Label Content="Account Holder:"/>
                                    <TextBox x:Name="AccountHolderText"/>
                                    
                                    <Label Content="Account Type:"/>
                                    <ComboBox x:Name="AccountTypeComboBox"/>
                                    
                                    <Label Content="Currency:"/>
                                    <ComboBox x:Name="CurrencyComboBox"/>
                                    
                                    <Label Content="Initial Deposit:"/>
                                    <TextBox x:Name="InitialDepositText" Text="0"/>
                                    
                                    <Button Content="Open Account" Click="OpenAccount_Click" Margin="5,10,5,5"/>
                                </StackPanel>
                            </Border>
                        </Expander>

                        <Expander Header="Deposit Money" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="IBAN:"/>
                                    <TextBox x:Name="DepositIbanText"/>
                                    
                                    <Label Content="Amount:"/>
                                    <TextBox x:Name="DepositAmountText"/>
                                    
                                    <Label Content="Currency:"/>
                                    <ComboBox x:Name="DepositCurrencyComboBox"/>
                                    
                                    <Button Content="Deposit" Click="Deposit_Click" Margin="5,10,5,5"/>
                                </StackPanel>
                            </Border>
                        </Expander>

                        <Expander Header="Withdraw Money" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="IBAN:"/>
                                    <TextBox x:Name="WithdrawIbanText"/>
                                    
                                    <Label Content="Amount:"/>
                                    <TextBox x:Name="WithdrawAmountText"/>
                                    
                                    <Button Content="Withdraw" Click="Withdraw_Click" Margin="5,10,5,5"/>
                                </StackPanel>
                            </Border>
                        </Expander>

                        <Expander Header="Transfer Money" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="From IBAN:"/>
                                    <TextBox x:Name="TransferFromIbanText"/>
                                    
                                    <Label Content="To IBAN:"/>
                                    <TextBox x:Name="TransferToIbanText"/>
                                    
                                    <Label Content="Amount:"/>
                                    <TextBox x:Name="TransferAmountText"/>
                                    
                                    <CheckBox x:Name="DifferentBankCheckbox" Content="Different Bank Transfer" Margin="5"/>
                                    
                                    <Label Content="Destination Bank (if different):"/>
                                    <ComboBox x:Name="DestBankCombo" DisplayMemberPath="BankName"/>
                                    
                                    <Button Content="Transfer" Click="Transfer_Click" Margin="5,10,5,5"/>
                                </StackPanel>
                            </Border>
                        </Expander>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Transaction History Tab -->
            <TabItem Header="Transaction History">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0">
                        <Label Content="Enter IBAN:"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="HistoryIbanText" Grid.Column="0"/>
                            <Button Content="View History" Click="ViewHistory_Click" Grid.Column="1" Width="150"/>
                        </Grid>
                    </StackPanel>

                    <DataGrid x:Name="TransactionHistoryGrid" Grid.Row="1" AutoGenerateColumns="False" 
                             IsReadOnly="True" Margin="5,10,5,5">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}" Width="150"/>
                            <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="150"/>
                            <DataGridTextColumn Header="Amount" Binding="{Binding Amount, StringFormat='{}{0:F2}'}" Width="100"/>
                            <DataGridTextColumn Header="Currency" Binding="{Binding Currency}" Width="80"/>
                            <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Account Management Tab -->
            <TabItem Header="Account Management">
                <ScrollViewer>
                    <StackPanel Margin="20">
                        <TextBlock Text="Account Management" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>
                        
                        <Expander Header="Change Currency" IsExpanded="True" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="IBAN:"/>
                                    <TextBox x:Name="ChangeCurrencyIbanText"/>
                                    
                                    <Label Content="New Currency:"/>
                                    <ComboBox x:Name="NewCurrencyComboBox"/>
                                    
                                    <Button Content="Change Currency" Click="ChangeCurrency_Click" Margin="5,10,5,5"/>
                                </StackPanel>
                            </Border>
                        </Expander>

                        <Expander Header="Close Account" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="IBAN:"/>
                                    <TextBox x:Name="CloseAccountIbanText"/>
                                    
                                    <Button Content="Close Account" Click="CloseAccount_Click" Margin="5,10,5,5" Background="#D32F2F"/>
                                </StackPanel>
                            </Border>
                        </Expander>

                        <Expander Header="Find Account" Margin="0,0,0,10">
                            <Border BorderBrush="#CCCCCC" BorderThickness="1" Padding="10" Margin="5">
                                <StackPanel>
                                    <Label Content="IBAN:"/>
                                    <TextBox x:Name="FindAccountIbanText"/>
                                    
                                    <Button Content="Find Account" Click="FindAccount_Click" Margin="5,10,5,5"/>
                                    
                                    <TextBox x:Name="AccountDetailsText" IsReadOnly="True" 
                                            TextWrapping="Wrap" MinHeight="200" Margin="5,10,5,5"
                                            VerticalScrollBarVisibility="Auto"/>
                                </StackPanel>
                            </Border>
                        </Expander>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
